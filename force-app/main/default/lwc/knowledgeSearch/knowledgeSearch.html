<template>
    <lightning-card title="Knowledge Search">
        <div class="slds-p-around_medium">
            <lightning-input
                placeholder="Search articles..."
                label="Search"
                onchange={handleSearchInput}>
            </lightning-input>

            <div class="slds-m-top_small">
                <lightning-button
                    label="Search"
                    onclick={handleSearchClick}
                    variant="brand">
                </lightning-button>
            </div>
        </div>

        <template if:true={loading}>
            <div class="slds-p-around_medium">
                <lightning-spinner
                    alternative-text="Loading"
                    size="small">
                </lightning-spinner>
            </div>
        </template>

        <template if:true={articles.length}>
            <div class="slds-p-around_medium">
                <ul class="slds-list_dotted">
                    <template for:each={articles} for:item="article">
                        <li key={article.Id} class="slds-m-bottom_small">
                            <div class="slds-grid slds-grid_align-spread slds-wrap">
                                <div class="slds-col">
                                    <button
                                        class="slds-button slds-button_reset"
                                        data-id={article.Id}
                                        onclick={handleOpenAndIncrement}>
                                        <strong>{article.Name}</strong>
                                    </button>
                                </div>
                                <div class="slds-col slds-text-align_right">
                                    Views: <span>{article.View_Count__c}</span>
                                </div>
                            </div>
                        </li>
                    </template>
                </ul>
            </div>
        </template>

        <template if:true={showNoResults}>
            <div class="slds-p-around_medium">
                <p>No results found.</p>
            </div>
        </template>
    </lightning-card>
</template>
